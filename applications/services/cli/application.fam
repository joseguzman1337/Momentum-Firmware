App(
    appid="cli",
    apptype=FlipperAppType.STARTUP,
    entry_point="cli_on_system_start",
    cdefines=["SRV_CLI"],
    sources=[
        "cli.c",
        "shell/cli_shell.c",
        "shell/cli_shell_completions.c",
        "shell/cli_shell_line.c",
        "cli_commands.c",
        "cli_command_gpio.c",
        "cli_ansi.c",
    ],
    sdk_headers=[
        "cli.h",
        "cli_ansi.h",
    ],
    # This STARTUP has to be processed before those that depend on the "cli" record.
    # "cli" used to be a SERVICE, but it's been converted into a STARTUP in order to
    # reduce RAM usage. The "block until record has been created" mechanism
    # unfortunately leads to a deadlock if the STARTUPs are processed sequentially.
    order=0,
)

App(
    appid="cli_vcp",
    name="CliVcpSrv",
    apptype=FlipperAppType.SERVICE,
    entry_point="cli_vcp_srv",
    stack_size=1024,
    order=40,
    sdk_headers=["cli_vcp.h"],
    sources=["cli_vcp.c"],
)

App(
    appid="cli_hello_world",
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_hello_world_ep",
    requires=["cli"],
    sources=["commands/hello_world.c"],
)

App(
    appid="cli_neofetch",
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_neofetch_ep",
    requires=["cli"],
    sources=["commands/neofetch.c"],
)

App(
    appid="cli_src",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_src_ep",
    requires=["cli"],
    sources=["cli_commands.c"],
)

App(
    appid="cli_uptime",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_uptime_ep",
    requires=["cli"],
    sources=["cli_commands.c"],
)

App(
    appid="cli_date",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_date_ep",
    requires=["cli"],
    sources=["cli_commands.c"],
)

App(
    appid="cli_sysctl",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_sysctl_ep",
    requires=["cli"],
    sources=["cli_commands.c"],
)

App(
    appid="cli_top",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_top_ep",
    requires=["cli"],
    sources=["cli_commands.c"],
)

App(
    appid="cli_vibro",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_vibro_ep",
    requires=["cli"],
    sources=["cli_commands.c"],
)

App(
    appid="cli_led",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_led_ep",
    requires=["cli"],
    sources=["cli_commands.c"],
)

App(
    appid="cli_gpio",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_gpio_ep",
    requires=["cli"],
    sources=["cli_commands.c", "cli_command_gpio.c"],
)

App(
    appid="cli_i2c",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_i2c_ep",
    requires=["cli"],
    sources=["cli_commands.c"],
)

App(
    appid="cli_clear",
    targets=["f7"],
    apptype=FlipperAppType.PLUGIN,
    entry_point="cli_clear_ep",
    requires=["cli"],
    sources=["cli_commands.c"],
)
